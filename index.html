<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>FC Barcelona Widget</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Anton&display=swap');
  html,body{margin:0;padding:0;width:100vw;height:100vh;overflow:hidden;background:linear-gradient(145deg,#0B2447,#A71930);display:flex;align-items:center;justify-content:center;font-family:'Anton',sans-serif;text-transform:uppercase;}
  .widget{width:90vw;max-width:900px;aspect-ratio:16/9;background:linear-gradient(145deg,#0B2447,#A71930);padding:20px;color:#444;position:relative;box-sizing:border-box;}
  .countdown{display:flex;justify-content:center;gap:20px;margin-bottom:12px;}
  .cd-block{text-align:center;}
  .cd-block .label{font-size:14px;color:#ccc;font-weight:600;text-transform:lowercase;}
  .cd-block .value{font-size:28px;color:#fff;font-weight:700;}
  .main{text-align:center;}
  .logos{display:flex;justify-content:center;align-items:center;gap:40px;margin-bottom:8px;}
  .logos img{height:120px;filter:drop-shadow(0 0 3px rgba(0,0,0,0.7));}
  .vs{font-size:56px;font-weight:400;color:#fff;}
  .info{font-size:13px;font-weight:400;color:#fff;line-height:1.3;margin-top:4px;}
  .opponents{display:flex;justify-content:center;gap:8px;margin-top:8px;}
  .opponent-box{width:54px;height:72px;padding:4px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;box-shadow:0 0 3px rgba(0,0,0,0.5);border-radius:0;position:relative;overflow:hidden;}
  .crest{width:54px;height:54px;object-fit:contain;z-index:1;}
  .bottom-strip{position:absolute;bottom:0;left:0;width:100%;height:25%;display:flex;align-items:center;justify-content:space-between;padding:0 10px;box-sizing:border-box;z-index:0;gap:4px;}
  .opponent-box.home .bottom-strip{background:#003366;}
  .opponent-box.away .bottom-strip{background:#8B0000;}
  .day{color:#fff;font-size:12px;font-weight:400;}
  .competition-logo{width:16px;height:16px;object-fit:contain;}
</style>
</head><body>
<div class="widget">
  <div class="countdown">
    <div class="cd-block"><div class="label">days</div><div class="value" id="days">0</div></div>
    <div class="cd-block"><div class="label">hours</div><div class="value" id="hours">00</div></div>
    <div class="cd-block"><div class="label">mins</div><div class="value" id="minutes">00</div></div>
    <div class="cd-block"><div class="label">secs</div><div class="value" id="seconds">00</div></div>
  </div>
  <div class="main">
    <div class="logos">
      <img id="home-logo" src="https://crests.football-data.org/81.png" alt="FC Barcelona"/>
      <div class="vs" style="font-weight:400;">v</div>
      <img id="away-logo" src="https://banner2.cleanpng.com/20180717/bxc/kisspng-fc-seoul-suwon-samsung-bluewings-jeju-united-fc-ga-lotto-logo-5b4dfec666c726.359798791531838150421.jpg" alt="FC Seoul"/>
    </div>
    <div class="info" id="match-info">
      31 July 2025 · 13:00 CEST · Seoul World Cup Stadium · Asia Tour Friendly
    </div>
  </div>
  <div class="opponents">
    <div class="opponent-box away">
      <img class="crest" src="https://upload.wikimedia.org/wikipedia/en/thumb/a/a4/Daegu_FC.svg/1200px-Daegu_FC.svg.png" alt="Daegu"/>
      <div class="bottom-strip">
        <div class="day">03</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
    <div class="opponent-box home">
      <img class="crest" src="https://crests.football-data.org/89.png" alt="Mallorca"/>
      <div class="bottom-strip">
        <div class="day">10</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
    <div class="opponent-box away">
      <img class="crest" src="https://crests.football-data.org/88.svg" alt="Levante"/>
      <div class="bottom-strip">
        <div class="day">17</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
    <div class="opponent-box home">
      <img class="crest" src="https://crests.football-data.org/92.png" alt="Rayo"/>
      <div class="bottom-strip">
        <div class="day">21</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
    <div class="opponent-box away">
      <img class="crest" src="https://crests.football-data.org/90.png" alt="Espanyol"/>
      <div class="bottom-strip">
        <div class="day">28</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
  </div>
</div>
<script>
  const apiKey = '05a3bddcc756af1413cbee4d9295cd57'; // Replace YOUR_API_KEY with your actual API key from API-Football
  const teamId = 81; // FC Barcelona ID in API-Football

  // Function to format date to 'DD MMM YYYY · HH:mm CEST'
  function formatDate(dateString) {
    const options = { day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false, timeZone: 'Europe/Madrid' };
    const date = new Date(dateString);
    return date.toLocaleString('en-GB', options).replace(',', ' ·');
  }

  // Update countdown for the next fixture date
  function updateCountdown(targetDate) {
    function update() {
      const now = new Date();
      const diff = new Date(targetDate) - now;
      const d = Math.max(0, Math.floor(diff / 864e5));
      const h = String(Math.floor((diff / 36e5) % 24)).padStart(2,'0');
      const m = String(Math.floor((diff / 6e4) % 60)).padStart(2,'0');
      const s = String(Math.floor((diff / 1e3) % 60)).padStart(2,'0');
      document.getElementById('days').textContent = d;
      document.getElementById('hours').textContent = h;
      document.getElementById('minutes').textContent = m;
      document.getElementById('seconds').textContent = s;
    }
    update();
    setInterval(update, 1000);
  }

  // Function to create or update next 5 fixtures boxes
  function updateNextFixtures(fixtures) {
    const container = document.querySelector('.opponents');
    container.innerHTML = ''; // Clear old fixtures

    fixtures.forEach(fixture => {
      const home = fixture.teams.home;
      const away = fixture.teams.away;
      const league = fixture.league;
      const fixtureDate = new Date(fixture.fixture.date);
      const dayNum = fixtureDate.getDate().toString().padStart(2, '0');
      const isHome = (home.id === teamId);
      const opponent = isHome ? away : home;
      const box = document.createElement('div');
      box.className = 'opponent-box ' + (isHome ? 'home' : 'away');

      box.innerHTML = `
        <img class="crest" src="${opponent.logo}" alt="${opponent.name}" />
        <div class="bottom-strip">
          <div class="day">${dayNum}</div>
          <img class="competition-logo" src="${league.logo}" alt="${league.name}" />
        </div>
      `;
      container.appendChild(box);
    });
  }

  // Main fetch and update function
  async function fetchAndUpdate() {
    try {
      const response = await fetch(`https://api-football-v1.p.rapidapi.com/v3/fixtures?team=${teamId}&next=5`, {
        method: 'GET',
        headers: {
          'X-RapidAPI-Key': apiKey,
          'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
        }
      });
      const data = await response.json();
      if(!data.response || data.response.length === 0) {
        console.error('No fixtures found');
        return;
      }

      // Next fixture is first in the list
      const nextFixture = data.response[0];
      const home = nextFixture.teams.home;
      const away = nextFixture.teams.away;
      const fixtureDate = nextFixture.fixture.date;
      const league = nextFixture.league;

      // Update main fixture logos
      document.getElementById('home-logo').src = home.logo;
      document.getElementById('home-logo').alt = home.name;
      document.getElementById('away-logo').src = away.logo;
      document.getElementById('away-logo').alt = away.name;

      // Update match info text (date · stadium · competition)
      const stadium = nextFixture.fixture.venue.name || '';
      document.getElementById('match-info').textContent = `${formatDate(fixtureDate)} · ${stadium} · ${league.name}`;

      // Update countdown
      updateCountdown(fixtureDate);

      // Update next 5 fixtures boxes
      updateNextFixtures(data.response);

    } catch (error) {
      console.error('Error fetching fixtures:', error);
    }
  }

  fetchAndUpdate();
</script>

</body></html>
