<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>FC Barcelona Widget</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Anton&display=swap');
  html,body{margin:0;padding:0;width:100vw;height:100vh;overflow:hidden;background:linear-gradient(145deg,#0B2447,#A71930);display:flex;align-items:center;justify-content:center;font-family:'Anton',sans-serif;text-transform:uppercase;}
  .widget{width:90vw;max-width:900px;aspect-ratio:16/9;background:linear-gradient(145deg,#0B2447,#A71930);padding:20px;color:#444;position:relative;box-sizing:border-box;}
  .countdown{display:flex;justify-content:center;gap:20px;margin-bottom:12px;}
  .cd-block{text-align:center;}
  .cd-block .label{font-size:14px;color:#ccc;font-weight:600;text-transform:lowercase;}
  .cd-block .value{font-size:28px;color:#fff;font-weight:700;}
  .main{text-align:center;}
  .logos{display:flex;justify-content:center;align-items:center;gap:40px;margin-bottom:8px;}
  .logos img{height:120px;filter:drop-shadow(0 0 3px rgba(0,0,0,0.7));}
  .vs{font-size:56px;font-weight:400;color:#fff;}
  .info{font-size:13px;font-weight:400;color:#fff;line-height:1.3;margin-top:4px;}
  .opponents{display:flex;justify-content:center;gap:8px;margin-top:8px;}
  .opponent-box{width:54px;height:72px;padding:4px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;box-shadow:0 0 3px rgba(0,0,0,0.5);border-radius:0;position:relative;overflow:hidden;}
  .crest{width:54px;height:54px;object-fit:contain;z-index:1;}
  .bottom-strip{position:absolute;bottom:0;left:0;width:100%;height:25%;display:flex;align-items:center;justify-content:space-between;padding:0 10px;box-sizing:border-box;z-index:0;gap:4px;}
  .opponent-box.home .bottom-strip{background:#003366;}
  .opponent-box.away .bottom-strip{background:#8B0000;}
  .day{color:#fff;font-size:12px;font-weight:400;}
  .competition-logo{width:16px;height:16px;object-fit:contain;}
</style>
</head><body>
<div class="widget">
  <div class="countdown">
    <div class="cd-block"><div class="label">days</div><div class="value" id="days">0</div></div>
    <div class="cd-block"><div class="label">hours</div><div class="value" id="hours">00</div></div>
    <div class="cd-block"><div class="label">mins</div><div class="value" id="minutes">00</div></div>
    <div class="cd-block"><div class="label">secs</div><div class="value" id="seconds">00</div></div>
  </div>
  <div class="main">
    <div class="logos">
      <img id="home-logo" src="https://crests.football-data.org/81.png" alt="FC Barcelona"/>
      <div class="vs" style="font-weight:400;">v</div>
      <img id="away-logo" src="https://banner2.cleanpng.com/20180717/bxc/kisspng-fc-seoul-suwon-samsung-bluewings-jeju-united-fc-ga-lotto-logo-5b4dfec666c726.359798791531838150421.jpg" alt="FC Seoul"/>
    </div>
    <div class="info" id="match-info">
      31 July 2025 · 13:00 CEST · Seoul World Cup Stadium · Asia Tour Friendly
    </div>
  </div>
  <div class="opponents">
    <div class="opponent-box away">
      <img class="crest" src="https://upload.wikimedia.org/wikipedia/en/thumb/a/a4/Daegu_FC.svg/1200px-Daegu_FC.svg.png" alt="Daegu"/>
      <div class="bottom-strip">
        <div class="day">03</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
    <div class="opponent-box home">
      <img class="crest" src="https://crests.football-data.org/89.png" alt="Mallorca"/>
      <div class="bottom-strip">
        <div class="day">10</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
    <div class="opponent-box away">
      <img class="crest" src="https://crests.football-data.org/88.svg" alt="Levante"/>
      <div class="bottom-strip">
        <div class="day">17</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
    <div class="opponent-box home">
      <img class="crest" src="https://crests.football-data.org/92.png" alt="Rayo"/>
      <div class="bottom-strip">
        <div class="day">21</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
    <div class="opponent-box away">
      <img class="crest" src="https://crests.football-data.org/90.png" alt="Espanyol"/>
      <div class="bottom-strip">
        <div class="day">28</div>
        <img class="competition-logo" src="https://logoeps.com/wp-content/uploads/2025/02/la_liga-logo.png" alt="LaLiga"/>
      </div>
    </div>
  </div>
</div>
<script>
async function fetchFixtures() {
  try {
    const res = await fetch('/.netlify/functions/getFixtures');
    if (!res.ok) throw new Error('Failed to fetch data');
    const data = await res.json();
    const fixtures = data.response;

    if (!fixtures || fixtures.length === 0) {
      console.log('No fixtures found');
      return;
    }

    // Clear old matches container, create new dynamic content
    const opponentsContainer = document.querySelector('.opponents');
    opponentsContainer.innerHTML = '';

    fixtures.forEach(fixture => {
      const home = fixture.teams.home;
      const away = fixture.teams.away;
      const dateObj = new Date(fixture.fixture.date);
      const day = String(dateObj.getDate()).padStart(2, '0');
      const competition = fixture.league.name;

      // Create opponent box element, home team on left, away team on right
      const opponentBox = document.createElement('div');
      opponentBox.classList.add('opponent-box');
      opponentBox.style.display = 'flex';
      opponentBox.style.justifyContent = 'space-between';
      opponentBox.style.marginBottom = '10px';

      // Home team box
      const homeDiv = document.createElement('div');
      homeDiv.classList.add('home');
      homeDiv.style.textAlign = 'center';
      homeDiv.style.width = '48%';

      const homeImg = document.createElement('img');
      homeImg.src = home.logo || home.image || ''; // API might have logo or image URL
      homeImg.alt = home.name;
      homeImg.style.width = '54px';
      homeImg.style.height = '54px';
      homeImg.style.objectFit = 'contain';

      const homeName = document.createElement('div');
      homeName.textContent = home.name;
      homeName.style.color = '#fff';
      homeName.style.fontSize = '12px';

      homeDiv.appendChild(homeImg);
      homeDiv.appendChild(homeName);

      // Away team box
      const awayDiv = document.createElement('div');
      awayDiv.classList.add('away');
      awayDiv.style.textAlign = 'center';
      awayDiv.style.width = '48%';

      const awayImg = document.createElement('img');
      awayImg.src = away.logo || away.image || '';
      awayImg.alt = away.name;
      awayImg.style.width = '54px';
      awayImg.style.height = '54px';
      awayImg.style.objectFit = 'contain';

      const awayName = document.createElement('div');
      awayName.textContent = away.name;
      awayName.style.color = '#fff';
      awayName.style.fontSize = '12px';

      awayDiv.appendChild(awayImg);
      awayDiv.appendChild(awayName);

      opponentBox.appendChild(homeDiv);
      opponentBox.appendChild(awayDiv);

      opponentsContainer.appendChild(opponentBox);
    });

  } catch (error) {
    console.error('Error fetching fixtures:', error);
  }
}

// Run on page load
fetchFixtures();
</script>


</body></html>
